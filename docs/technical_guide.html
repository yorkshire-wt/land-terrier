<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dom Hinchley">

<title>Land Terrier - Technical Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="forest">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Land Terrier</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Installation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./user_guide.html"> 
<span class="menu-text">User Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./technical_guide.html" aria-current="page"> 
<span class="menu-text">Technical Guide</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Introduction</a></li>
  <li><a href="#database-configuration" id="toc-database-configuration" class="nav-link" data-scroll-target="#database-configuration">Database Configuration</a>
  <ul class="collapse">
  <li><a href="#service" id="toc-service" class="nav-link" data-scroll-target="#service">Service</a></li>
  </ul></li>
  <li><a href="#tables" id="toc-tables" class="nav-link" data-scroll-target="#tables">Tables</a>
  <ul class="collapse">
  <li><a href="#domains.boundary_types" id="toc-domains.boundary_types" class="nav-link" data-scroll-target="#domains.boundary_types">Sites</a>
  <ul class="collapse">
  <li><a href="#domains" id="toc-domains" class="nav-link" data-scroll-target="#domains">Domains</a></li>
  </ul></li>
  <li><a href="#parcels" id="toc-parcels" class="nav-link" data-scroll-target="#parcels">Parcels</a>
  <ul class="collapse">
  <li><a href="#domains-1" id="toc-domains-1" class="nav-link" data-scroll-target="#domains-1">Domains</a></li>
  </ul></li>
  <li><a href="#ownership" id="toc-ownership" class="nav-link" data-scroll-target="#ownership">Ownership</a>
  <ul class="collapse">
  <li><a href="#domains-2" id="toc-domains-2" class="nav-link" data-scroll-target="#domains-2">Domains</a></li>
  </ul></li>
  <li><a href="#occupancy" id="toc-occupancy" class="nav-link" data-scroll-target="#occupancy">Occupancy</a>
  <ul class="collapse">
  <li><a href="#domains-3" id="toc-domains-3" class="nav-link" data-scroll-target="#domains-3">Domains</a></li>
  </ul></li>
  <li><a href="#parcel-history" id="toc-parcel-history" class="nav-link" data-scroll-target="#parcel-history">Parcel History</a></li>
  </ul></li>
  <li><a href="#process" id="toc-process" class="nav-link" data-scroll-target="#process">Process</a>
  <ul class="collapse">
  <li><a href="#adding-a-new-site" id="toc-adding-a-new-site" class="nav-link" data-scroll-target="#adding-a-new-site">Adding a new site</a></li>
  <li><a href="#adding-a-new-parcel" id="toc-adding-a-new-parcel" class="nav-link" data-scroll-target="#adding-a-new-parcel">Adding a new parcel</a></li>
  <li><a href="#process-adding-ownership" id="toc-process-adding-ownership" class="nav-link" data-scroll-target="#process-adding-ownership">Adding Parcel Ownership</a></li>
  <li><a href="#adding-parcel-occupancy" id="toc-adding-parcel-occupancy" class="nav-link" data-scroll-target="#adding-parcel-occupancy">Adding Parcel occupancy</a></li>
  </ul></li>
  <li><a href="#functionality" id="toc-functionality" class="nav-link" data-scroll-target="#functionality">Functionality</a>
  <ul class="collapse">
  <li><a href="#views" id="toc-views" class="nav-link" data-scroll-target="#views">Views</a></li>
  </ul></li>
  <li><a href="#exports" id="toc-exports" class="nav-link" data-scroll-target="#exports">Exports</a>
  <ul class="collapse">
  <li><a href="#standards" id="toc-standards" class="nav-link" data-scroll-target="#standards">Standards</a></li>
  </ul></li>
  <li><a href="#faqs" id="toc-faqs" class="nav-link" data-scroll-target="#faqs">FAQs</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Technical Guide</h1>
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dom Hinchley </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">January 22, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="intro" class="level1">
<h1>Introduction</h1>
<p>All nature reserves the Trust manages are are made up of discrete parcels of land. Some of the parcels have been purchased by the Trust, others are leased (usually on a long term basis).</p>
<p>The Trust needs a way to know what land holdings it currently owns and which it leases. This information is usually tracked through a <a href="https://en.wikipedia.org/wiki/Land_terrier">Land Terrier</a>. It is beyond the scope of the GIS database replicate all the features of a land terrier as this requires complex bi-temporal modelling and must consider <a href="https://en.wikipedia.org/wiki/Slowly_changing_dimension">slowly changing dimensions</a> (SCDs) to maintain a full audit trail.</p>
<p>In the absence of a full Land Terrier, some useful features have been implemented to track changes over time.</p>
</section>
<section id="database-configuration" class="level1">
<h1>Database Configuration</h1>
<section id="service" class="level2">
<h2 class="anchored" data-anchor-id="service">Service</h2>
<p>Postgresql Service file… etc… ## Roles <code>land_administrator</code> <code>gis_administrator</code> ## Loading from backup # Schema Definition</p>
<div id="fig-land-admin-erd" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-land-admin-erd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="assets/img/erd_small.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-land-admin-erd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: An ERD diagram.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="tables" class="level1">
<h1>Tables</h1>
<section id="domains.boundary_types" class="level2">
<h2 class="anchored" data-anchor-id="domains.boundary_types">Sites</h2>
<p>Sites are a classification given for a group of land holdings (parcels) that the Trust has an interest in; these are usually classed as nature reserves but could also constitute buildings or farms.</p>
<ul>
<li><p>Site geometries must only be constructed from parcels</p></li>
<li><p>All areas in a site with or without known ownership/tenure must be accounted for on the parcel layer</p></li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Constraints</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Privileges</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">site_id*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Unique identifier for the site.</td>
</tr>
<tr class="even">
<td style="text-align: left;">site_name*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Accepted name for the site.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">main_habitat_code</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">High level categorisation of the main habitat type across the site. Selected from a unique list of values.</td>
</tr>
<tr class="even">
<td style="text-align: left;">site_category_code</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Categorisation of site from an operational point of view. Selected from a unique list of values.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">notes</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Free text notes about the site.</td>
</tr>
<tr class="even">
<td style="text-align: left;">site_privacy_code*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">site_wildness_code</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;"></td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> * mandatory field</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 57%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_constraint_name</th>
<th style="text-align: left;">pg_constraint_def</th>
<th style="text-align: left;">pg_constraint_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sites_pkey</td>
<td style="text-align: left;">PRIMARY KEY (site_id)</td>
<td style="text-align: left;">Record identifier. Must be UNIQUE and NOT NULL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">sites_dom_site_privacy_fk</td>
<td style="text-align: left;">FOREIGN KEY (site_privacy_code) REFERENCES dom_site_privacy(site_privacy_code) ON UPDATE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sites_dom_site_wildness_fk</td>
<td style="text-align: left;">FOREIGN KEY (site_wildness_code) REFERENCES dom_site_wildness(site_wildness_code) ON UPDATE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 41%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_privilege_type</th>
<th style="text-align: left;">pg_privilege_grantees</th>
<th style="text-align: left;">pg_privilege_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SELECT</td>
<td style="text-align: left;">gis_admin, land_administrator, standard_users</td>
<td style="text-align: left;">Allowed to view the data in the table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">INSERT</td>
<td style="text-align: left;">gis_admin</td>
<td style="text-align: left;">Allowed to add new rows of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPDATE</td>
<td style="text-align: left;">gis_admin</td>
<td style="text-align: left;">Allowed to modify the data in existing rows.</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to delete rows of data from the table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>sites</code> table does not have a geometry. The full site table is created from a view that constructs the boundaries from the current YWT tenure parcels. The view can then be enriched by spatially comparing the parcels to externally sourced data sets.</p>
</div>
</div>
<section id="domains" class="level3">
<h3 class="anchored" data-anchor-id="domains">Domains</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Main Habitat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Site Category</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Wildness Rating</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">main_habitat_code</th>
<th style="text-align: left;">Main Habitat</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">WOOD</td>
<td style="text-align: left;">Woodland and Forest</td>
<td style="text-align: left;">If the site is mainly considered a woodland reserve or the predominate landcover type is woodland.</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEATH</td>
<td style="text-align: left;">Heathland and shrub</td>
<td style="text-align: left;">If the site is mainly considered a heathland reserve or the predominate landcover type is heathland.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SCRUB</td>
<td style="text-align: left;">Scrub</td>
<td style="text-align: left;">If the site is mainly considered to be scrubland reserve or the predominate landcover type is scrub.</td>
</tr>
<tr class="even">
<td style="text-align: left;">COAST</td>
<td style="text-align: left;">Coastal</td>
<td style="text-align: left;">If the site is mainly considered a grassland reserve or the predominate landcover type is grassland.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GRASS</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">If the site is mainly considered a grassland reserve or the predominate landcover type is one of the grassland habitat types.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROCK</td>
<td style="text-align: left;">Rocky</td>
<td style="text-align: left;">If the site is mainly considered rocky or sparesely vegetated i.e quarry, scree slopes, inland sand dunes.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ARBL</td>
<td style="text-align: left;">Arable and Horticulture</td>
<td style="text-align: left;">If the site is mainly considered an arable or horticultural site i.e community garden, orchard or arable farm.</td>
</tr>
<tr class="even">
<td style="text-align: left;">WET</td>
<td style="text-align: left;">Wetland</td>
<td style="text-align: left;">If the site is mainly considered a wetland reserve or the predominate landcover type is wetland.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">No main habitat</td>
<td style="text-align: left;">If it is not possible to determine and assign a main habitat type this category can be used. It is also used for the administrative category.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">site_category_code</th>
<th style="text-align: left;">Site Category</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">NR</td>
<td style="text-align: left;">Nature Reserve</td>
<td style="text-align: left;">The default category. A protected area established to conserve biodiversity, safeguard habitats, and promote ecological integrity. These sites are often designated for the preservation of native flora and fauna, offering a sanctuary for wildlife. These sites welcome visitors where they can engage in guided walks and wildlife observation, all while fostering a deeper appreciation for our natural ecosystems.</td>
</tr>
<tr class="even">
<td style="text-align: left;">EX</td>
<td style="text-align: left;">Explorer Site</td>
<td style="text-align: left;">A site designated for encouraging active engagement and exploration of natural landscapes. Explorer Sites serve as gateways for individuals to discover and learn about nature, promoting conservation awareness through hands-on experiences. These sites will usually have a visitor centre or other similar visitor enagement facilities. They may also be called ‘gateway’ sites.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WLD</td>
<td style="text-align: left;">Wild</td>
<td style="text-align: left;">This category encompasses areas that are largely untouched by human activity. These sites promote minimal human interference, allowing nature to thrive without significant management. Wild areas are essential for preserving biodiversity and providing habitat for various species. There may be little to no visitor infrastructure and no ongoing mangement.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ARC</td>
<td style="text-align: left;">Arc Site</td>
<td style="text-align: left;">This is a conservation area specifically designed to serve as a refuge for vulnerable species and a hub for ecological restoration efforts. These sites may be strategically selected to connect fragmented habitats and enhance species movement across landscapes. The Arc approach emphasizes resilience and adaptability, focusing on both the preservation of existing biodiversity and the restoration of degraded habitats. the sensitivity of these sites often mean they will not be open to the public.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DON</td>
<td style="text-align: left;">Donor site</td>
<td style="text-align: left;">A conservation area where biodiversity is actively cultivated and managed to provide resources for other conservation initiatives. These sites often focus on sustainable practices that promote the growth of native plants and animals, serving as a source for rewilding efforts and restoration projects elsewhere. Donor Sites contribute to regional biodiversity by supplying seeds, cuttings, or animal populations to help re-establish ecological balance in degraded areas.</td>
</tr>
<tr class="even">
<td style="text-align: left;">FRM</td>
<td style="text-align: left;">Farm</td>
<td style="text-align: left;">In the context of nature conservation this is an active agricultural site that integrates sustainable practices with biodiversity conservation. They prioritise environemntally methods, such as organic farming, permaculture, and agroecology, to enhance soil health and support wildlife habitats. These sites often contribute to local ecosystems while providing food and resources for surrounding communities. Educational programs often highlight the connection between agriculture and conservation. This is not a category for old farms that may now be undergoing rewilding with no active farming taking place.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LM</td>
<td style="text-align: left;">Livestock Management</td>
<td style="text-align: left;">These sites focus on sustainable practices for raising animals while minimizing environmental impact. They are not fully operational farms but may be grassland sites where grazing stock are kept between rotations onto other sites. Generally speaking they may not be open to the public as there is little to no ecological interest and they are operational sites where visitors may be at risk.</td>
</tr>
<tr class="even">
<td style="text-align: left;">AD</td>
<td style="text-align: left;">Administrative</td>
<td style="text-align: left;">These sites relate to administrative functions of the organisation. It could be offices, tools stores, shops or even education centres</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 81%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">site_wildness_code</th>
<th style="text-align: left;">Site Wildness</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">W1</td>
<td style="text-align: left;">Wild</td>
<td style="text-align: left;">Relaxed, accessible and welcoming all year- round. An introduction to Yorkshire’s wild places for all ages, complete with creature comforts.</td>
</tr>
<tr class="even">
<td style="text-align: left;">W2</td>
<td style="text-align: left;">Wilder</td>
<td style="text-align: left;">A step off the beaten track, where visitors can explore and nurture their budding passion for Yorkshire’s wildlife.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">W3</td>
<td style="text-align: left;">Wildest</td>
<td style="text-align: left;">Really wild spaces, often hosting seasonal spectacles, for the really adventurous who aren’t shy in navigating the great outdoors!</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="parcels" class="level2">
<h2 class="anchored" data-anchor-id="parcels">Parcels</h2>
<p>Parcel geometries form the building blocks of sites they may or may not be registered with <a href="https://www.gov.uk/government/organisations/land-registry">HM Land Registry</a>. The mapped parcels must adhere to the following rules;</p>
<ul>
<li><p>Parcel geometries must be valid and topologically correct</p></li>
<li><p>Parcels must be reference the site they are part of</p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>A parcel version is archived to the <code>parcel_history</code> table when the <code>valid_to</code> field is modified. It should be left <code>NULL</code> for boundary corrections and adding missing information.</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Constraints</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Privileges</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Triggers</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parcel_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Unique identifier for the parcel. It remains with the parcel forever and is used to maintain a historical record.</td>
</tr>
<tr class="even">
<td style="text-align: left;">site_id*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Site that the parcel belong to. The geometry of the parcel will be a constituent part of the site geometry.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parcel_alias*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">An alias for the parcel to help distinguish it on a site. It must be unique within each site.</td>
</tr>
<tr class="even">
<td style="text-align: left;">boundary_type_code*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates if the boundary is a proposed boundary, Indicative boundary, or legal boundary with valid values.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">notes</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Free text for adding any notes specific to the parcel.</td>
</tr>
<tr class="even">
<td style="text-align: left;">area_ha</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">Autogenerated, total area of the parcel in hectares.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">valid_from</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Indicates when the parcel in its current form can be considered valid from.</td>
</tr>
<tr class="even">
<td style="text-align: left;">valid_to</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Indicates when the parcel is valid to. NULL represents that the current parcel is valid. Adding in a valid_to date will archive a copy of the current parcel to the `parcel_history` table.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">geometry(MultiPolygon, 27700)</td>
<td style="text-align: left;">Represents the outer boundary of each parcel as a polygon feature.</td>
</tr>
<tr class="even">
<td style="text-align: left;">updated_at*</td>
<td style="text-align: left;">timestamp without time zone</td>
<td style="text-align: left;">Indicates the last time the feature was updated.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">updated_by*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates the user that last updated the feature.</td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> * mandatory field</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 50%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_constraint_name</th>
<th style="text-align: left;">pg_constraint_def</th>
<th style="text-align: left;">pg_constraint_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parcels_pkey</td>
<td style="text-align: left;">PRIMARY KEY (parcel_uuid)</td>
<td style="text-align: left;">Record identifier. Must be UNIQUE and NOT NULL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">parcels_site_id_fkey</td>
<td style="text-align: left;">FOREIGN KEY (site_id) REFERENCES land_admin.sites(site_id) ON UPDATE CASCADE ON DELETE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unique_site_parcels</td>
<td style="text-align: left;">UNIQUE (site_id, parcel_alias)</td>
<td style="text-align: left;">Ensures that a site cannot have two parcels with the same name.</td>
</tr>
<tr class="even">
<td style="text-align: left;">check_parcel_has_valid_dates</td>
<td style="text-align: left;">CHECK ((valid_to &gt; valid_from))</td>
<td style="text-align: left;">Checks that the <code>valid_to</code> date is after the <code>valid_from</code> date.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_privilege_type</th>
<th style="text-align: left;">pg_privilege_grantees</th>
<th style="text-align: left;">pg_privilege_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SELECT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to view the data in the table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">INSERT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to add new rows of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPDATE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to modify the data in existing rows.</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to delete rows of data from the table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_trigger_name</th>
<th style="text-align: left;">pg_trigger_comment</th>
<th style="text-align: left;">pg_trigger_function</th>
<th style="text-align: left;">pg_trigger_function_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tr_01_update_modified</td>
<td style="text-align: left;">Logs when data is changed.</td>
<td style="text-align: left;">utils.trf_update_modified</td>
<td style="text-align: left;">Sets <code>updated_at</code> and <code>updated_by</code> to the current datetime and user, respectively.</td>
</tr>
<tr class="even">
<td style="text-align: left;">tr_02_update_area_ha</td>
<td style="text-align: left;">Responds to changes in the geometry to keep the area up to date.</td>
<td style="text-align: left;">utils.trf_update_areaha</td>
<td style="text-align: left;">Calculates <code>area_ha</code> to 4 d.p. from the geometry.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tr_03_update_parcel_history</td>
<td style="text-align: left;">Responds when the <code>valid_to</code> field is updated.</td>
<td style="text-align: left;">land_admin.trf_log_parcel_history</td>
<td style="text-align: left;">The inputted <code>valid_to</code> field becomes the new <code>valid_from</code>. A copy of the old values from the modified row are inserted into the <code>parcel_history</code> table. The new <code>valid_to</code> field is set to <code>NULL</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="domains-1" class="level3">
<h3 class="anchored" data-anchor-id="domains-1">Domains</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Boundary Types</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">boundary_type_code</th>
<th style="text-align: left;">Boundary Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">IND</td>
<td style="text-align: left;">Indicative</td>
<td style="text-align: left;">This indicates that the boundary is indicative only and does not necessarily reflect the legally agreed boundary. This is a useful flag to allow data users to take care when referring to these boundaries.</td>
</tr>
<tr class="even">
<td style="text-align: left;">PROP</td>
<td style="text-align: left;">Proposed</td>
<td style="text-align: left;">This indicates a potential new site where there is no legal agreement yet in place.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LEGAL</td>
<td style="text-align: left;">Legal</td>
<td style="text-align: left;">Indicates that the boundary matches, as far as possible, the legally agreed extents. All boundaries are only ever truly indicative and should never be assumed to be infallible but more confidence can be given to sites with this flag that the best efforts have been made to accurately denote the true extent.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="ownership" class="level2">
<h2 class="anchored" data-anchor-id="ownership">Ownership</h2>
<p>Tenure defines the ownership of the land parcels. The rows in the freehold tenure table function as timeline entries, recording the tenure history over time. Land ownership transitions immediately to the new owner upon the end of the previous ownership, hence there is only a tenure start field. Using this structure it is very easy to maintain the narrative assuming the following assumptions</p>
<ul>
<li><p>Tenure must not have gaps in date ranges. This would indicate that the parcel is not owned by anyone which cannot be true.</p></li>
<li><p>A parcel cannot have the more then one freeholder at the same time.</p></li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Constraints</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Privileges</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Triggers</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ownership_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Unique tracking id.</td>
</tr>
<tr class="even">
<td style="text-align: left;">parcel_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">References the parcel the tenure applies to.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">freehold_title</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">The freehold title if applicable. This will be the official Land Reg title number.</td>
</tr>
<tr class="even">
<td style="text-align: left;">landowner*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Details who holds the freehold. The Wildlife Trust must be 'Trust'.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ownership_type_code*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Details the type of freehold tenure populated from a set of valid values.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ownership_date_start</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Date when the freehold started. For freeholds prior to The Trust from times in memoriam, this can be left blank. The freehold ends (through sale/disposal) with the addtitions of a subsequest rows `freehold_start_date`.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purchase_amount_gbp</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">Purchase ammout in GBP paid by the current freeholder (if known). Gifts should be `0`.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ownership_notes</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Notes relevant to the ownership.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ownership_file_notes</td>
<td style="text-align: left;">json</td>
<td style="text-align: left;">File notes and links to documentation.</td>
</tr>
<tr class="even">
<td style="text-align: left;">updated_at*</td>
<td style="text-align: left;">timestamp without time zone</td>
<td style="text-align: left;">Indicates the last time the feature was updated.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">updated_by*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates the user that last updated the feature.</td>
</tr>
<tr class="even">
<td style="text-align: left;">transfer_type_code</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates how the parcel came into the possession of the landowner.</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> * mandatory field</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 47%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_constraint_name</th>
<th style="text-align: left;">pg_constraint_def</th>
<th style="text-align: left;">pg_constraint_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ownership_pkey</td>
<td style="text-align: left;">PRIMARY KEY (ownership_uuid)</td>
<td style="text-align: left;">Record identifier. Must be UNIQUE and NOT NULL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ownership_parcel_uuid_fkey</td>
<td style="text-align: left;">FOREIGN KEY (parcel_uuid) REFERENCES land_admin.parcels(parcel_uuid) ON UPDATE CASCADE ON DELETE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">check_trust_has_start_date</td>
<td style="text-align: left;">CHECK ((NOT ((ownership_date_start IS NULL) AND (landowner = ‘Trust’::text))))</td>
<td style="text-align: left;">Ensures that land parcels considered under The Trust’s holdings have a commencement date.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_privilege_type</th>
<th style="text-align: left;">pg_privilege_grantees</th>
<th style="text-align: left;">pg_privilege_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SELECT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to view the data in the table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">INSERT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to add new rows of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPDATE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to modify the data in existing rows.</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to delete rows of data from the table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_trigger_name</th>
<th style="text-align: left;">pg_trigger_comment</th>
<th style="text-align: left;">pg_trigger_function</th>
<th style="text-align: left;">pg_trigger_function_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tr_01_update_modified</td>
<td style="text-align: left;">Logs when data is changed.</td>
<td style="text-align: left;">utils.trf_update_modified</td>
<td style="text-align: left;">Sets <code>updated_at</code> and <code>updated_by</code> to the current datetime and user, respectively.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="domains-2" class="level3">
<h3 class="anchored" data-anchor-id="domains-2">Domains</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Ownership Types</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Transfer Types</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 88%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">ownership_type_code</th>
<th style="text-align: left;">Ownership Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FH</td>
<td style="text-align: left;">Freehold</td>
<td style="text-align: left;">Freehold is a type of property ownership that grants the owner full control and rights over the land and any structures on it for an indefinite period. This tenure type is the most complete form of ownership.</td>
</tr>
<tr class="even">
<td style="text-align: left;">U</td>
<td style="text-align: left;">Unknown ownership</td>
<td style="text-align: left;">Unknown tenure types are where the land is being actively managed but there is no agreement in place or no documentation can be found to establish the type of tenure that is in place. These parcels need to be resolved as a priority and so it is very useful to flag instances where this occurs.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">transfer_type_code</th>
<th style="text-align: left;">Transfer Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SALE</td>
<td style="text-align: left;">Sale</td>
<td style="text-align: left;">Land given in exchange for money.</td>
</tr>
<tr class="even">
<td style="text-align: left;">GIFT</td>
<td style="text-align: left;">Gift</td>
<td style="text-align: left;">Land given freely.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXC</td>
<td style="text-align: left;">Exchange</td>
<td style="text-align: left;">Land exchanged for another piece of land.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADV</td>
<td style="text-align: left;">Adverse posession</td>
<td style="text-align: left;">Legally claimed ownership of the land due to extended occupation.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">U</td>
<td style="text-align: left;">Unknown</td>
<td style="text-align: left;">Unknow how the land was acquired.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="occupancy" class="level2">
<h2 class="anchored" data-anchor-id="occupancy">Occupancy</h2>
<p>Land parcels may be leased by the Trust from a 3rd party. The Trust can also lease out land that it owns or sub-lease if it is in an agreement of its own. Parcels may not have a leasehold so this is optional. This table tracks both parcels that the Trust leases and those that it leases out..</p>
<ul>
<li>Leases must reference a freeholder (either directly or indirectly through a sub-lease).</li>
<li>A leaseholder cannot lease form themselves.</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Constraints</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Privileges</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Triggers</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">occupancy_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Unique tracking id.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ownership_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Freehold tenure the lease is from.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">leasehold_title</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">The leasehold title if applicable. This will be the official Land Reg title number.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupant*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">The entity in receipt of the lease. Must be 'Trust' if the recipient is The Wildlife Trust.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">occupancy_type_code*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Details the type of lease populated from a set of valid values.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupancy_date_start</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Date (inclusive) of when the tenure started.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">occupancy_date_end</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Date (exclusive) of when the tenure ended/expired.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupancy_notes</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Notes relevant to the freehold.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">occupancy_file_notes</td>
<td style="text-align: left;">json</td>
<td style="text-align: left;">File notes and links to documentation.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupancy_amount_gbp</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">Total amount paid for the over the period.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">updated_at*</td>
<td style="text-align: left;">timestamp without time zone</td>
<td style="text-align: left;">Indicates the last time the feature was updated.</td>
</tr>
<tr class="even">
<td style="text-align: left;">updated_by*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates the user that last updated the feature.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">renewal_type_code*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Categorises how to treat the occupancy after the expiration of the term.</td>
</tr>
<tr class="even">
<td style="text-align: left;">termination_date</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">This is when the occupant ceases to have an affiliation under the current terms. This is necessary as it is possible for tenancies to 'hold over' after the tenancy term ends. In this situation, the parcel will show as having a lease expired but still affiliated with the client. If a new lease is agreed, the termination date should end the daye before the new tenancy starts.</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> * mandatory field</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 47%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_constraint_name</th>
<th style="text-align: left;">pg_constraint_def</th>
<th style="text-align: left;">pg_constraint_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">occupancy_pkey</td>
<td style="text-align: left;">PRIMARY KEY (occupancy_uuid)</td>
<td style="text-align: left;">Record identifier. Must be UNIQUE and NOT NULL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupancy_ownership_uuid_fkey</td>
<td style="text-align: left;">FOREIGN KEY (ownership_uuid) REFERENCES land_admin.ownership(ownership_uuid) ON UPDATE CASCADE ON DELETE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">check_occupancy_end_after_start</td>
<td style="text-align: left;">CHECK ((occupancy_date_end &gt;= occupancy_date_start))</td>
<td style="text-align: left;">Checks that the <code>occupancy_date_end</code> is after the <code>occupancy_date_start</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">check_trust_has_start_date</td>
<td style="text-align: left;">CHECK ((NOT ((occupancy_date_start IS NULL) AND (occupant = ‘Trust’::text))))</td>
<td style="text-align: left;">Ensures that land parcels managed by The Trust have a commencement date.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exclude_same_occupant_date_overlaps</td>
<td style="text-align: left;">EXCLUDE USING gist (ownership_uuid WITH =, daterange(occupancy_date_start, occupancy_date_end) WITH &amp;&amp;)</td>
<td style="text-align: left;">Makes sure that the same occupant cannot have duplicate leases during the same timeframe.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_privilege_type</th>
<th style="text-align: left;">pg_privilege_grantees</th>
<th style="text-align: left;">pg_privilege_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SELECT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to view the data in the table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">INSERT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to add new rows of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPDATE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to modify the data in existing rows.</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to delete rows of data from the table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_trigger_name</th>
<th style="text-align: left;">pg_trigger_comment</th>
<th style="text-align: left;">pg_trigger_function</th>
<th style="text-align: left;">pg_trigger_function_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tr_01_update_modified</td>
<td style="text-align: left;">Logs when data is changed.</td>
<td style="text-align: left;">utils.trf_update_modified</td>
<td style="text-align: left;">Sets <code>updated_at</code> and <code>updated_by</code> to the current datetime and user, respectively.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="domains-3" class="level3">
<h3 class="anchored" data-anchor-id="domains-3">Domains</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Occupancy Types</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Renewal Types</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">occupancy_type_code</th>
<th style="text-align: left;">Occupancy Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">LH</td>
<td style="text-align: left;">Leasehold</td>
<td style="text-align: left;">Leasehold is a form of property tenure where the leaseholder (tenant) holds the right to occupy and use the property for a specified period, as outlined in a lease agreement, which can range from a few years to several decades. The leaseholder does not own the land; ownership remains with the freeholder (landlord). Leaseholders typically pay rent to the freeholder and may be responsible for maintenance and other costs. At the end of the lease term, ownership and possession of the property revert to the freeholder.</td>
</tr>
<tr class="even">
<td style="text-align: left;">MA</td>
<td style="text-align: left;">Management Agreement</td>
<td style="text-align: left;">A Management Agreement is a legal contract between a property owner and a management company or individual responsible for overseeing the operation and maintenance of the property. This agreement outlines the responsibilities of the manager, including property upkeep, financial management, tenant relations, and compliance with regulations. It typically specifies the duration of the agreement, fees, and performance expectations, allowing property owners to ensure their assets are effectively managed without directly handling day-to-day operations.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LI</td>
<td style="text-align: left;">Licence</td>
<td style="text-align: left;">A Licence is a legal agreement that permits an individual or entity to use a property owned by another party for a specific purpose, without transferring any ownership rights. Unlike a lease, a licence is usually more flexible and can be granted for a short term or for a specific activity (e.g., holding an event, accessing land for recreation). Licences are generally revocable and do not create an interest in the property, meaning the licensor retains control and can terminate the agreement as stipulated.</td>
</tr>
<tr class="even">
<td style="text-align: left;">FBT</td>
<td style="text-align: left;">Farm Business Tenancy</td>
<td style="text-align: left;">A Farm Business Tenancy (FBT) is a specific type of agricultural tenancy in the UK that allows a tenant to farm land for a defined period while adhering to the terms of the tenancy agreement. FBTs typically grant tenants the right to cultivate crops, keep livestock, and engage in agricultural activities. They are governed by specific legislation, providing tenants with certain protections, such as security of tenure and the ability to claim compensation for improvements made to the property. This arrangement supports sustainable farming practices while enabling landowners to retain ownership of their land.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">U</td>
<td style="text-align: left;">Unknown occupation</td>
<td style="text-align: left;">Unknown tenure types are where the land is being actively managed but there is no agreement in place or no documentation can be found to establish the type of tenure that is in place. These parcels need to be resolved as a priority and so it is very useful to flag instances where this occurs.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 17%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">renewal_type_code</th>
<th style="text-align: left;">Renewal Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HOLD</td>
<td style="text-align: left;">Holdover</td>
<td style="text-align: left;">Tenancy remains after the expiration of the lease so long as the tenant continues payments to the landlord.</td>
</tr>
<tr class="even">
<td style="text-align: left;">OUT_1954</td>
<td style="text-align: left;">Contracted out of Landlord and Tanants Act 1954</td>
<td style="text-align: left;">Excluded from the provisions of sections 24 to 28 of the Landlord and Tenants Act 1954. If this is the case then then there is no holding over of the lease after the expiry and a new lease must be negotiated.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PERIODIC</td>
<td style="text-align: left;">Periodic</td>
<td style="text-align: left;">Tenancies that do not have an end date specified.</td>
</tr>
<tr class="even">
<td style="text-align: left;">NONE</td>
<td style="text-align: left;">None</td>
<td style="text-align: left;">Marks that lease terminates at the end of the term. This is used where a contract specifically states the contract will end ona specific date and is also used for archiving tenancies that have expired.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="parcel-history" class="level2">
<h2 class="anchored" data-anchor-id="parcel-history">Parcel History</h2>
<p>Changes to parcels are an extended feature of the GIS data model. They</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Parcel history tracking is setup using database triggers on the <code>parcels</code> table. It is not necessary to manually update data once the model has been established. If you notice errors/discrepancies, please notify the database administration team.</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Constraints</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false">Privileges</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false">Triggers</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pg_column_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parcel_history_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Unique identifier for the history record.</td>
</tr>
<tr class="even">
<td style="text-align: left;">parcel_uuid*</td>
<td style="text-align: left;">uuid</td>
<td style="text-align: left;">Identifier of the parcel in the parcel table.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">site_id*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">References the site the parcel was a part of between the valid dates. Note this facilitates the transfer of parcels between sites and maintaining a history.</td>
</tr>
<tr class="even">
<td style="text-align: left;">valid_from</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Indicates when the information about the parcel should be considered valid from. Not that the deafult is for this to start as NULL indicating that up until the valid to date, the parcel was considered valid.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">valid_to*</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">Indicates the upper limit of when this version of the parcel data should be considered valid from. It should align equal teh valid_from date of the corresponding parcel on the parcels table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">geometry(MultiPolygon, 27700)</td>
<td style="text-align: left;">Represents the outer boundary of each parcel as a polygon feature.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">updated_at*</td>
<td style="text-align: left;">timestamp without time zone</td>
<td style="text-align: left;">Indicates the last time the feature was updated.</td>
</tr>
<tr class="even">
<td style="text-align: left;">updated_by*</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Indicates the user that last updated the feature.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">notes</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Free text field for notes about this version of the parcel history.</td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0;"><sup></sup> * mandatory field</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 49%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_constraint_name</th>
<th style="text-align: left;">pg_constraint_def</th>
<th style="text-align: left;">pg_constraint_comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">parcel_history_pkey</td>
<td style="text-align: left;">PRIMARY KEY (parcel_history_uuid)</td>
<td style="text-align: left;">Record identifier. Must be UNIQUE and NOT NULL.</td>
</tr>
<tr class="even">
<td style="text-align: left;">parcel_history_parcel_uuid_fkey</td>
<td style="text-align: left;">FOREIGN KEY (parcel_uuid) REFERENCES land_admin.parcels(parcel_uuid) ON UPDATE CASCADE ON DELETE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">parcel_history_site_id_fkey</td>
<td style="text-align: left;">FOREIGN KEY (site_id) REFERENCES land_admin.sites(site_id) ON UPDATE CASCADE ON DELETE CASCADE</td>
<td style="text-align: left;">Maintains referential integrity.</td>
</tr>
<tr class="even">
<td style="text-align: left;">check_parcel_has_valid_dates</td>
<td style="text-align: left;">CHECK ((valid_to &gt;= valid_from))</td>
<td style="text-align: left;">Checks that the <code>valid_to</code> date is after the <code>valid_from</code> date.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exclude_parcel_overlapping_times</td>
<td style="text-align: left;">EXCLUDE USING gist (parcel_uuid WITH =, daterange(valid_from, valid_to) WITH &amp;&amp;)</td>
<td style="text-align: left;">Ensures that the same parcel cannot have multiple versions a the same time.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_privilege_type</th>
<th style="text-align: left;">pg_privilege_grantees</th>
<th style="text-align: left;">pg_privilege_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SELECT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to view the data in the table.</td>
</tr>
<tr class="even">
<td style="text-align: left;">INSERT</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to add new rows of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UPDATE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to modify the data in existing rows.</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELETE</td>
<td style="text-align: left;">[Administrator Only]</td>
<td style="text-align: left;">Allowed to delete rows of data from the table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<colgroup>
<col style="width: 19%">
<col style="width: 22%">
<col style="width: 24%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">pg_trigger_name</th>
<th style="text-align: left;">pg_trigger_comment</th>
<th style="text-align: left;">pg_trigger_function</th>
<th style="text-align: left;">pg_trigger_function_comment</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="process" class="level1">
<h1>Process</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The land administration process has been designed to be conducted using QGIS by someone with the <code>land_administrator</code> database privileges. The relationships and layers have been setup in a QGIS project which can be found in the <code>land_admin</code> schema.</p>
</div>
</div>
<section id="adding-a-new-site" class="level2">
<h2 class="anchored" data-anchor-id="adding-a-new-site">Adding a new site</h2>
<ol type="1">
<li>Add a new row to the <code>land_admin.sites</code> table</li>
<li>Check the spelling of the <code>site_name</code> as this will be the the <strong>definitive name</strong> and must be used as throughout the Trust.</li>
<li>Create an alpha-numeric code to use as the <code>site_id</code>. Try to make it a three letter code to keep it as simple as possible. This will become the <strong>unique identifier</strong> for the site and must be used consistently across the Trust.</li>
</ol>
</section>
<section id="adding-a-new-parcel" class="level2">
<h2 class="anchored" data-anchor-id="adding-a-new-parcel">Adding a new parcel</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Inserting/updating parcel geometries requires advanced digitising techniques to maintain topologies, snap to nodes, and avoid overlaps. Any errors will result in misaligned site boundaries so this must be carried out by a GIS specialist.</p>
</div>
</div>
<ol type="1">
<li>Use the INSPIRE polygons layer as a basis to digitise a new parcel on the <code>land_admin.parcels</code>. If the polygons disagree with the deeds, seek advice from Lana Huntley (Estates Officer).</li>
<li>Complete the required information including designating which site the parcel belongs to. <strong>Leave the <code>valid_to</code> and <code>valid_from</code> fields as <em><code>NULL</code></em></strong>.</li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Setting the <code>valid_from</code> at this stage will create a historical version of the parcel on the <code>parcel_history</code> table. This is only necessary when the geometry is being updated, not at creation.</p>
</div>
</div>
<ol start="3" type="1">
<li>Save the data to generate the <code>parcel_uuid</code>.</li>
</ol>
</section>
<section id="process-adding-ownership" class="level2">
<h2 class="anchored" data-anchor-id="process-adding-ownership">Adding Parcel Ownership</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Every parcel <strong><em>must</em></strong> have an owner before YWT became involved in the parcel. Even if the owner is unknown, the <code>landowner</code> field must not be <em><code>NULL</code></em>. The ownership start date for this prior landowner can be <code>*NULL*</code> as the model is not interested with tracking their land terrier history, only YWT’s.</p>
</div>
</div>
<ol type="1">
<li>Select the newly constructed parcel with the identify tool <img src="https://raw.githubusercontent.com/qgis/QGIS/refs/heads/master/images/themes/default/mActionIdentify.svg" class="img-fluid" width="24"> to open up the widget.</li>
<li>Add a new entry to the <code>land_admin.ownership</code> layer for the site <img src="https://raw.githubusercontent.com/qgis/QGIS/refs/heads/master/images/themes/default/mActionNewTableRow.svg" class="img-fluid" width="24">. Each site owner follows on from the next through sale/gift etc. Add the records with the date of when the new landowner took on the parcel. If the Trust is the owner, the landowner must be entered as <strong>‘Trust’</strong> to enable accurate reporting.</li>
<li>Save the edits to generate an <code>ownership_uuid</code>.</li>
</ol>
</section>
<section id="adding-parcel-occupancy" class="level2">
<h2 class="anchored" data-anchor-id="adding-parcel-occupancy">Adding Parcel occupancy</h2>
<ol type="1">
<li>Open the parcel widget using the steps in <a href="#process-adding-ownership">Adding Parcel Ownership</a>.</li>
</ol>
</section>
</section>
<section id="functionality" class="level1">
<h1>Functionality</h1>
<section id="views" class="level2">
<h2 class="anchored" data-anchor-id="views">Views</h2>
<div id="fig-fh-tenure-timeline" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-fh-tenure-timeline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">%%{init: { 'gantt': {'leftPadding': 200} } }%%
gantt
    title Tenure History for a Parcel
    dateFormat  YYYY
    axisFormat %Y
    
    section Original Landowner
    Freehold      :3rdownership1, 2010, 10y
    
    section YWT
    Leasehold      :ywtoccupancy1, 2017, 3y
    
    Freehold       :ywtownership1, after 3rdownership1, 2035
    section 3rd Party
    Leasehold      :3rdoccupancy1, 2023, 4y

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fh-tenure-timeline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Example tenure history for a given parcel. The chart is interpreted as: the parcel was initially leased by YWT from the landowner for 3 years. The Trust purchased the freehold in 2020, ending the lease. The Trust then leased out the site to a 3rd party in 2024 for four years but remains the freeholder.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="exports" class="level1">
<h1>Exports</h1>
<section id="standards" class="level2">
<h2 class="anchored" data-anchor-id="standards">Standards</h2>
<p>There are two main spatial views that are used for exporting to the common format:</p>
<p><code>public.sites_export</code></p>
<p><code>public.tenure_export</code></p>
<p>A summary of the tenure is also provided:</p>
<p><code>land_admin.vw_tenure_all</code></p>
</section>
</section>
<section id="faqs" class="level1">
<h1>FAQs</h1>
<p><strong>Why does the sites table not have a geometry?</strong></p>
<p>It is important to maintain the spatial relationship between the land parcels and the site boundaries. It is easier to build the site boundaries on demand through a view than to remember to keep the geometries in sync manually.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>